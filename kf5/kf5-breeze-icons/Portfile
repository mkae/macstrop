# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$
# Copyright (c) 2015, 2016 R.J.V. Bertin

PortSystem          1.0

set kf5.project     breeze-icons
set kf5.framework   breeze-icons
PortGroup           kf5 1.1
version             ${kf5.version}
set kf5.latest_version \
                    5.35.0

# we use 
if {${kf5.latest_version} ne ${kf5.version}} {
    kf5.use_latest  kf5.version
    version         ${kf5.version}
    checksums       rmd160  064f169382c871db4aa73af9896f1ead8770ad20 \
                    sha256  3ccc2373acf345f867e085bafa522906d4c97a198a88c4fab0b42b8b08d93b02
} else {
    checksums       rmd160  70c62c98b8892af66f3dd266962fecc79a6e892c \
                    sha256  23a3a0b7f25736f1b5169d958de11b9fe2ad1e9e649e08bd283b81f9a19aa1d8
}

maintainers         gmail.com:rjvbertin mk openmaintainer

installs_libs       no
supported_archs     noarch

description         Breeze icon theme
long_description    Breeze icon theme, made exclusively out of scalable (SVG) images.

subport ${name}-dark {
    description     Dark ${description}
    long_description \
                    Dark ${long_description}
}

if {${subport} eq "${name}"} {
    extract.post_args-append \
                    --exclude ${distname}/icons-dark
    post-extract {
        reinplace "s|add_subdirectory(icons-dark)|# no dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
    # for Kexi:
    configure.args-append \
                    -DBINARY_ICONS_RESOURCE=ON
} else {
    extract.post_args-append \
                    --exclude ${distname}/icons
    post-extract {
        reinplace "s|add_subdirectory(icons)|# only dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
}
post-extract {
    reinplace "s|add_subdirectory(autotests)|# no autotests|g" ${worksrcpath}/CMakeLists.txt
}
# removing the autotests allows to remove the Qt dependency
if {[info exists qt5_dependency]} {
    depends_lib-delete \
                    ${qt5_dependency}
    depends_lib-delete \
                    qt5-mac qt5
}
depends_run-append  port:hicolor-icon-theme

# Qt documentation for this package makes no sense
kf5.allow_apidocs_generation no

livecheck.type      regex
livecheck.version   ${kf5.branch}
livecheck.url       http://download.kde.org/stable/frameworks/
livecheck.regex     (5+(\\.\\d+)+)
