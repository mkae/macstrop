# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$
# Copyright (c) 2015, 2016 R.J.V. Bertin

PortSystem          1.0

set kf5.project     breeze-icons
set kf5.framework   breeze-icons
PortGroup           kf5 1.1
version             ${kf5.version}

# we use 
if {${kf5.latest_version} ne ${kf5.version}} {
    kf5.use_latest  kf5.version
    version         ${kf5.version}
    checksums       rmd160  ea3fb343a7c32f2dc3cdda4463275a55b444258c \
                    sha256  0bad6cad78f948fd73fc89ae2566b59b6859a752e95eb348ce735408d4bffbae
} else {
    checksums       rmd160  ea3fb343a7c32f2dc3cdda4463275a55b444258c \
                    sha256  0bad6cad78f948fd73fc89ae2566b59b6859a752e95eb348ce735408d4bffbae
}

maintainers         gmail.com:rjvbertin mk openmaintainer

installs_libs       no
supported_archs     noarch

description         Breeze icon theme
long_description    Breeze icon theme, made exclusively out of scalable (SVG) images.

subport ${name}-dark {
    description     Dark ${description}
    long_description \
                    Dark ${long_description}
}

if {${subport} eq "${name}"} {
    extract.post_args-append \
                    --exclude ${distname}/icons-dark
    post-extract {
        reinplace "s|add_subdirectory(icons-dark)|# no dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
    # for Kexi:
    configure.args-append \
                    -DBINARY_ICONS_RESOURCE=ON
} else {
    extract.post_args-append \
                    --exclude ${distname}/icons
    post-extract {
        reinplace "s|add_subdirectory(icons)|# only dark icons|g" ${worksrcpath}/CMakeLists.txt
    }
}
post-extract {
    reinplace "s|add_subdirectory(autotests)|# no autotests|g" ${worksrcpath}/CMakeLists.txt
}
# removing the autotests allows to remove the Qt dependency
if {[info exists qt5_dependency]} {
    depends_lib-delete \
                    ${qt5_dependency}
    depends_lib-delete \
                    qt5-mac qt5
}

# Qt documentation for this package makes no sense
kf5.allow_apidocs_generation no

livecheck.type      regex
livecheck.version   ${kf5.branch}
livecheck.url       http://download.kde.org/stable/frameworks/
livecheck.regex     (5+(\\.\\d+)+)
