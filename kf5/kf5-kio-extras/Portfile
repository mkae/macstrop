# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4
# $Id$
# Copyright (c) 2015, 2016 R.J.V. Bertin

PortSystem          1.0

set kf5.project     kio-extras
set kf5.virtualPath applications
PortGroup           kf5 1.1
# kf5.use_latest      applications

maintainers         gmail.com:rjvbertin mk openmaintainer

installs_libs       no

description         Additional components to increase the functionality of KF5 KIO
long_description    Additional components to increase the functionality of KF5 KIO.
checksums           rmd160  d2b6fa881ee990a4d0277efb149a5ae2980aad64 \
                    sha256  f8d4f8c2ba16ef7d3d8944e4dd0acf0e546149658276a0e0e5e5f973b0adabc8

kf5.depends_qt5_components \
                    qtsvg
kf5.depends_frameworks \
                    kactivities karchive kbookmarks kconfig kconfigwidgets kcoreaddons \
                    kdbusaddons kdoctools kdnssd kguiaddons ki18n kiconthemes \
                    kio khtml kdelibs4support kpty solid
depends_lib-append  port:phonon-qt5 \
                    port:libssh \
                    port:exiv2 \
                    port:jpeg
platform darwin {
    # get these from the host on linux:
    depends_lib-append \
                    bin:smbclient:samba3 \
                    port:libmtp \
                    port:openexr \
                    port:openslp
}

kf5.allow_apidocs_generation no

post-patch {
    reinplace "s|/opt/local/man|${prefix}/share/man|g" ${worksrcpath}/man/kio_man.cpp
    reinplace "s|/opt/local|${prefix}|g" ${worksrcpath}/man/man2html.cpp
    reinplace "s|/opt/local/lib/info|${prefix}/share/info|g" ${worksrcpath}/info/kde-info2html.conf
}

livecheck.type      regex
livecheck.url       http://download.kde.org/stable/applications/
livecheck.regex     (\\d+(\\.\\d+)+)
